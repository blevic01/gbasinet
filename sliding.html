<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sliding Puzzle - GBASIMET</title>
<style>
body{text-align:center;margin:0;font-family:Arial;background-image:url('https://wallpaperaccess.com/full/3175017.jpg');background-size:cover;color:white;}
h1{margin-top:20px;text-shadow:2px 2px #000;}
canvas{background:black;display:block;margin:20px auto;}
button{margin:10px;padding:10px 20px;font-size:16px;border-radius:8px;cursor:pointer;}
</style>
</head>
<body>
<h1>Sliding Puzzle</h1>
<canvas id="canvas" width="400" height="400"></canvas>
<button onclick="startGame()">Restart</button>
<button onclick="window.location.href='games.html'">Back to Games</button>

<script>
const canvas=document.getElementById('canvas'), ctx=canvas.getContext('2d');
const size=4, tileSize=100;
let tiles=[];

function startGame(){
    tiles=[];
    for(let i=1;i<size*size;i++) tiles.push(i);
    tiles.push(0);
    shuffle(tiles);
    drawTiles();
}

function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*i); [arr[i],arr[j]]=[arr[j],arr[i]]; } }

function drawTiles(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    for(let i=0;i<tiles.length;i++){
        let x=i%size*tileSize, y=Math.floor(i/size)*tileSize;
        if(tiles[i]!==0){
            ctx.fillStyle='blue'; ctx.fillRect(x,y,tileSize,tileSize);
            ctx.fillStyle='white'; ctx.font='40px Arial'; ctx.fillText(tiles[i],x+35,y+60);
        }
    }
}

canvas.onclick=function(e){
    let x=Math.floor(e.offsetX/tileSize), y=Math.floor(e.offsetY/tileSize);
    let idx=y*size+x, zeroIdx=tiles.indexOf(0);
    let zx=zeroIdx%size, zy=Math.floor(zeroIdx/size);
    if(Math.abs(x-zx)+Math.abs(y-zy)===1){ [tiles[idx],tiles[zeroIdx]]=[tiles[zeroIdx],tiles[idx]]; drawTiles();}
    if(tiles.every((t,i)=>i===tiles.length-1 || t===i+1)) alert("You solved it!");
}
startGame();
</script>
</body>
</html>